pipeline{
  agent any

  stages{
    stage('Build'){
      steps{
        cd /var/lib/jenkins/workspace/leafer
        mvn clean install
      }
    }

    stage('DB_Migration'){
      steps{
        chmod +x '/var/lib/jenkins/workspace/leafer/scripts/db_config.sh'
        sh '/var/lib/jenkins/workspace/leafer/scripts/db_config.sh'
      }
    }

    stage('Deploy'){
      steps{
        sh '/var/lib/jenkins/workspace/leafer/scripts/deploy.sh'
      }
    }
  }
}